<?xml version="1.0" encoding="UTF-8"?>
<xml>

	<!--Include this file only once-->

	<pragma once="true" />

	<!--Project Specific-->

	<set name="PROJECT_DIR" value="${this_dir}" />

	<set name="PROJECT_THIRDPARTY_DIR" value="${PROJECT_DIR}/../thirdparty" />

	<set name="PROJECT_LIB_DIR" value="${PROJECT_DIR}/../lib" />

	<!--Libraries Config-->

	<include name="${PROJECT_THIRDPARTY_DIR}/libraries-config.xml" />

	<!--Includes-->

	<files id="haxe">
		<include name="${PROJECT_THIRDPARTY_DIR}/libraries-includes.xml" />
	</files>

	<files id="__main__">
		<include name="${PROJECT_THIRDPARTY_DIR}/libraries-includes.xml" />
	</files>

	<!--Linking Libraries-->

	<target id="haxe">
		<section if="windows">
			<lib name="${PROJECT_LIB_DIR}/Windows/arm64/rogue.lib" if="HXCPP_ARM64" />
			<lib name="${PROJECT_LIB_DIR}/Windows/x64/rogue.lib" if="HXCPP_M64" unless="HXCPP_ARM64" />
			<lib name="${PROJECT_LIB_DIR}/Windows/x86/rogue.lib" if="HXCPP_M32" />
		</section>

		<section if="android">
			<lib name="${PROJECT_LIB_DIR}/Android/arm64-v8a/librogue.so" if="HXCPP_ARM64" />
			<lib name="${PROJECT_LIB_DIR}/Android/armeabi-v7a/librogue.so" if="HXCPP_ARMV7" />
			<lib name="${PROJECT_LIB_DIR}/Android/x86/librogue.so" if="HXCPP_X86" />
			<lib name="${PROJECT_LIB_DIR}/Android/x86_64/librogue.so" if="HXCPP_X86_64" />
		</section>

		<section if="linux">
			<flag value="-L${PROJECT_LIB_DIR}/Linux/arm64" if="HXCPP_ARM64" />
			<flag value="-L${PROJECT_LIB_DIR}/Linux/x64" if="HXCPP_M64" unless="HXCPP_ARM64" />
			<flag value="-L${PROJECT_LIB_DIR}/Linux/x86" if="HXCPP_M32" />

			<flag value="-Wl,-rpath,$ORIGIN" />

			<lib name="-lrogue" />
		</section>
	</target>

	<!--Copy Libraries-->

	<section if="windows">
		<copyFile toolId="exe" name="rogue.dll" from="${PROJECT_LIB_DIR}/Windows/arm64" if="HXCPP_ARM64" />
		<copyFile toolId="exe" name="rogue.dll" from="${PROJECT_LIB_DIR}/Windows/x64" if="HXCPP_M64" unless="HXCPP_ARM64" />
		<copyFile toolId="exe" name="rogue.dll" from="${PROJECT_LIB_DIR}/Windows/x86" if="HXCPP_M32" />
	</section>

	<section if="linux">
		<copyFile toolId="exe" name="librogue.so" from="${PROJECT_LIB_DIR}/Linux/arm64" if="HXCPP_ARM64" />
		<copyFile toolId="exe" name="librogue.so" from="${PROJECT_LIB_DIR}/Linux/x64" if="HXCPP_M64" unless="HXCPP_ARM64" />
		<copyFile toolId="exe" name="librogue.so" from="${PROJECT_LIB_DIR}/Linux/x86" if="HXCPP_M32" />
	</section>
</xml>
